(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{125:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return o})),t.d(n,"toc",(function(){return p})),t.d(n,"default",(function(){return s}));var r=t(3),a=t(7),l=(t(0),t(178)),i={id:"client-overview",title:"Client Overview",original_id:"client-overview"},o={unversionedId:"client/client-overview",id:"version-3.x.x/client/client-overview",isDocsHomePage:!1,title:"Client Overview",description:"graphql-kotlin-client is a lightweight type-safe GraphQL HTTP client. Type-safe data models are generated at build time",source:"@site/versioned_docs/version-3.x.x/client/client-overview.md",slug:"/client/client-overview",permalink:"/graphql-kotlin/docs/3.x.x/client/client-overview",editUrl:"https://github.com/ExpediaGroup/graphql-kotlin/tree/master/website/versioned_docs/version-3.x.x/client/client-overview.md",version:"3.x.x",lastUpdatedBy:"Shane Myrick",lastUpdatedAt:1614029087,sidebar:"version-3.x.x/docs",previous:{title:"Subscriptions",permalink:"/graphql-kotlin/docs/3.x.x/spring-server/subscriptions"},next:{title:"Client Features",permalink:"/graphql-kotlin/docs/3.x.x/client/client-features"}},p=[{value:"Project Configuration",id:"project-configuration",children:[]},{value:"Generating GraphQL Client",id:"generating-graphql-client",children:[]},{value:"Executing Queries",id:"executing-queries",children:[]}],c={toc:p};function s(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(l.b)("wrapper",Object(r.a)({},c,t,{components:n,mdxType:"MDXLayout"}),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"graphql-kotlin-client")," is a lightweight type-safe GraphQL HTTP client. Type-safe data models are generated at build time\nby the GraphQL Kotlin ",Object(l.b)("a",{parentName:"p",href:"/graphql-kotlin/docs/3.x.x/plugins/gradle-plugin"},"Gradle")," and\n",Object(l.b)("a",{parentName:"p",href:"/graphql-kotlin/docs/3.x.x/plugins/maven-plugin"},"Maven")," plugins."),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"GraphQLClient")," is a thin wrapper on top of ",Object(l.b)("a",{parentName:"p",href:"https://ktor.io/clients/index.html"},"Ktor HTTP Client")," and supports fully\nasynchronous non-blocking communication. It is highly customizable and can be configured with any supported Ktor HTTP\n",Object(l.b)("a",{parentName:"p",href:"https://ktor.io/clients/http-client/engines.html"},"engine")," and ",Object(l.b)("a",{parentName:"p",href:"https://ktor.io/clients/http-client/features.html"},"features"),"."),Object(l.b)("h2",{id:"project-configuration"},"Project Configuration"),Object(l.b)("p",null,"GraphQL Kotlin provides both Gradle and Maven plugins to automatically generate your client code at build time. Once\nyour data classes are generated, you can then execute their underlying GraphQL operations using ",Object(l.b)("inlineCode",{parentName:"p"},"graphql-kotlin-client"),"\nruntime dependency."),Object(l.b)("p",null,"Basic ",Object(l.b)("inlineCode",{parentName:"p"},"build.gradle.kts")," Gradle configuration:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-kotlin"},'\nimport com.expediagroup.graphql.plugin.gradle.graphql\n\nplugins {\n    id("com.expediagroup.graphql") version $latestGraphQLKotlinVersion\n}\n\ndependencies {\n  implementation("com.expediagroup:graphql-kotlin-client:$latestGraphQLKotlinVersion")\n}\n\ngraphql {\n    client {\n        endpoint = "http://localhost:8080/graphql"\n        packageName = "com.example.generated"\n    }\n}\n\n')),Object(l.b)("p",null,"Equivalent ",Object(l.b)("inlineCode",{parentName:"p"},"pom.xml")," Maven configuration"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-xml"},'\n<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.example</groupId>\n    <artifactId>graphql-kotlin-maven-client-example</artifactId>\n    <version>1.0.0-SNAPSHOT</version>\n\n    <properties>\n        <graphql-kotlin.version>$latestGraphQLKotlinVersion</graphql-kotlin.version>\n    </properties>\n\n    <dependencies>\n        <dependency>\n            <groupId>com.expediagroup</groupId>\n            <artifactId>graphql-kotlin-client</artifactId>\n            <version>${graphql-kotlin.version}</version>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>com.expediagroup</groupId>\n                <artifactId>graphql-kotlin-maven-plugin</artifactId>\n                <version>${graphql-kotlin.version}</version>\n                <executions>\n                    <execution>\n                        <id>generate-graphql-client</id>\n                        <goals>\n                            <goal>introspectSchema</goal>\n                            <goal>generateClient</goal>\n                        </goals>\n                        <configuration>\n                            <endpoint>http://localhost:8080/graphql</endpoint>\n                            <packageName>com.example.generated</packageName>\n                            <schemaFile>${project.build.directory}/schema.graphql</schemaFile>\n                        </configuration>\n                    </execution>\n                </executions>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n\n')),Object(l.b)("p",null,"See ",Object(l.b)("a",{parentName:"p",href:"https://github.com/ExpediaGroup/graphql-kotlin/tree/master/examples/client"},"graphql-kotlin-client-example")," project for complete\nworking examples of Gradle and Maven based projects."),Object(l.b)("h2",{id:"generating-graphql-client"},"Generating GraphQL Client"),Object(l.b)("p",null,"By default, GraphQL Kotlin build plugins will attempt to generate GraphQL clients from all ",Object(l.b)("inlineCode",{parentName:"p"},"*.graphql")," files located under\n",Object(l.b)("inlineCode",{parentName:"p"},"src/main/resources"),". Queries are validated against the target GraphQL schema, which can be manually provided, retrieved by\nthe plugins through introspection (as configured in examples above) or downloaded directly from a custom SDL endpoint.\nSee our documentation for more details on supported ",Object(l.b)("a",{parentName:"p",href:"/graphql-kotlin/docs/3.x.x/plugins/gradle-plugin"},"Gradle tasks"),"\nand ",Object(l.b)("a",{parentName:"p",href:"/graphql-kotlin/docs/3.x.x/plugins/maven-plugin"},"Maven Mojos"),"."),Object(l.b)("p",null,"When creating your GraphQL queries make sure to always specify an operation name and name the files accordingly. Each\none of your query files will generate a corresponding Kotlin file with a class matching your operation\nname that will act as a wrapper for all corresponding data classes. For example, given ",Object(l.b)("inlineCode",{parentName:"p"},"HelloWorldQuery.graphql")," with\n",Object(l.b)("inlineCode",{parentName:"p"},"HelloWorldQuery")," as the operation name, GraphQL Kotlin plugins will generate a corresponding ",Object(l.b)("inlineCode",{parentName:"p"},"HelloWorldQuery.kt")," file\nwith a ",Object(l.b)("inlineCode",{parentName:"p"},"HelloWorldQuery")," class under the configured package."),Object(l.b)("p",null,"For example, given a simple schema"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-graphql"},"\ntype Query {\n  helloWorld: String\n}\n\n")),Object(l.b)("p",null,"And a corresponding ",Object(l.b)("inlineCode",{parentName:"p"},"HelloWorldQuery.graphql")," query"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-graphql"},"\nquery HelloWorldQuery {\n  helloWorld\n}\n\n")),Object(l.b)("p",null,"Plugins will generate following client code"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-kotlin"},'\npackage com.example.generated\n\nimport com.expediagroup.graphql.client.GraphQLClient\nimport com.expediagroup.graphql.types.GraphQLResponse\nimport kotlin.String\n\nconst val HELLO_WORLD_QUERY: String = "query HelloWorldQuery {\\n    helloWorld\\n}"\n\nclass HelloWorldQuery(\n  private val graphQLClient: GraphQLClient\n) {\n  suspend fun execute(): GraphQLResponse<HelloWorldQuery.Result> =\n      graphQLClient.execute(HELLO_WORLD_QUERY, "HelloWorldQuery", null)\n\n  data class Result(\n    val helloWorld: String\n  )\n}\n\n')),Object(l.b)("p",null,"Generated classes requires an instance of ",Object(l.b)("inlineCode",{parentName:"p"},"GraphQLClient")," and exposes a single ",Object(l.b)("inlineCode",{parentName:"p"},"execute")," suspendable method that executes\nthe underlying GraphQL operation using the provided client."),Object(l.b)("h2",{id:"executing-queries"},"Executing Queries"),Object(l.b)("p",null,"Your auto generated classes accept an instance of ",Object(l.b)("inlineCode",{parentName:"p"},"GraphQLClient")," which is a thin wrapper around Ktor HTTP client that\nensures proper serialization and deserialization of your GraphQL objects. ",Object(l.b)("inlineCode",{parentName:"p"},"GraphQLClient")," requires target URL to be\nspecified and defaults to fully asynchronous non-blocking ",Object(l.b)("a",{parentName:"p",href:"https://ktor.io/clients/http-client/engines.html#cio"},"Coroutine-based IO engine"),"."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-kotlin"},'\npackage com.example.client\n\nimport com.expediagroup.graphql.client.GraphQLClient\nimport com.expediagroup.graphql.generated.HelloWorldQuery\nimport kotlinx.coroutines.runBlocking\nimport java.net.URL\n\nfun main() {\n    val client = GraphQLClient(url = URL("http://localhost:8080/graphql"))\n    val helloWorldQuery = HelloWorldQuery(client)\n    runBlocking {\n        val result = helloWorldQuery.execute()\n        println("hello world query result: ${result.data?.helloWorld}")\n    }\n    client.close()\n}\n\n')))}s.isMDXComponent=!0},178:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return h}));var r=t(0),a=t.n(r);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=a.a.createContext({}),s=function(e){var n=a.a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=s(e.components);return a.a.createElement(c.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},g=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),u=s(t),g=r,h=u["".concat(i,".").concat(g)]||u[g]||d[g]||l;return t?a.a.createElement(h,o(o({ref:n},c),{},{components:t})):a.a.createElement(h,o({ref:n},c))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=g;var o={};for(var p in n)hasOwnProperty.call(n,p)&&(o[p]=n[p]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var c=2;c<l;c++)i[c]=t[c];return a.a.createElement.apply(null,i)}return a.a.createElement.apply(null,t)}g.displayName="MDXCreateElement"}}]);