<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/graphql-kotlin/blog/rss.xml" title="GraphQL Kotlin Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/graphql-kotlin/blog/atom.xml" title="GraphQL Kotlin Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="GraphQL Kotlin" href="/graphql-kotlin/opensearch.xml">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Client Customization | GraphQL Kotlin</title><meta data-react-helmet="true" property="og:image" content="https://expediagroup.github.io/graphql-kotlin/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:image" content="https://expediagroup.github.io/graphql-kotlin/img/undraw_online.svg"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for GraphQL Kotlin"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Client Customization | GraphQL Kotlin"><meta data-react-helmet="true" name="description" content="Ktor HTTP Client Customization"><meta data-react-helmet="true" property="og:description" content="Ktor HTTP Client Customization"><meta data-react-helmet="true" property="og:url" content="https://expediagroup.github.io/graphql-kotlin/docs/next/client/client-customization"><link data-react-helmet="true" rel="shortcut icon" href="/graphql-kotlin/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://expediagroup.github.io/graphql-kotlin/docs/next/client/client-customization"><link rel="stylesheet" href="/graphql-kotlin/styles.e61032f2.css">
<link rel="preload" href="/graphql-kotlin/styles.0be40b40.js" as="script">
<link rel="preload" href="/graphql-kotlin/runtime~main.3452ef2b.js" as="script">
<link rel="preload" href="/graphql-kotlin/main.9b929bdd.js" as="script">
<link rel="preload" href="/graphql-kotlin/1.86a8a4de.js" as="script">
<link rel="preload" href="/graphql-kotlin/2.a4a621d7.js" as="script">
<link rel="preload" href="/graphql-kotlin/165.e2a0eb40.js" as="script">
<link rel="preload" href="/graphql-kotlin/168.251d61f6.js" as="script">
<link rel="preload" href="/graphql-kotlin/935f2afb.96f675be.js" as="script">
<link rel="preload" href="/graphql-kotlin/17896441.3c4bb8bf.js" as="script">
<link rel="preload" href="/graphql-kotlin/30544b63.ae863128.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/graphql-kotlin/"><img src="/graphql-kotlin/img/EG_Icon_White_on_Blue.png" alt="GraphQL Kotlin" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/graphql-kotlin/img/EG_Icon_White_on_Blue.png" alt="GraphQL Kotlin" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">GraphQL Kotlin</strong></a><a href="https://github.com/ExpediaGroup/graphql-kotlin" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/graphql-kotlin/docs/next/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/graphql-kotlin/docs/next/client/client-customization">Next</a></li><li><a class="dropdown__link" href="/graphql-kotlin/docs/client/client-customization">4.x.x</a></li><li><a class="dropdown__link" href="/graphql-kotlin/docs/3.x.x/client/client-customization">3.x.x</a></li></ul></div><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/graphql-kotlin/"><img src="/graphql-kotlin/img/EG_Icon_White_on_Blue.png" alt="GraphQL Kotlin" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/graphql-kotlin/img/EG_Icon_White_on_Blue.png" alt="GraphQL Kotlin" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">GraphQL Kotlin</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/ExpediaGroup/graphql-kotlin" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/graphql-kotlin/docs/next/client/client-customization">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/graphql-kotlin/docs/client/client-customization">4.x.x</a></li><li class="menu__list-item"><a class="menu__link" href="/graphql-kotlin/docs/3.x.x/client/client-customization">3.x.x</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/examples">Examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/graphql-java-comparison">GraphQL Java Comparison</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/blogs-and-videos">Blogs &amp; Videos</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Schema Generator</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/schema-generator-getting-started">Getting Started with the Schema Generator</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Writing schemas with Kotlin</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/writing-schemas/nullability">Nullability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/writing-schemas/arguments">Arguments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/writing-schemas/scalars">Scalars</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/writing-schemas/enums">Enums</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/writing-schemas/lists">Lists</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/writing-schemas/interfaces">Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/writing-schemas/unions">Unions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/writing-schemas/annotations">Annotations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/writing-schemas/nested-arguments">Nested Resolvers and Shared Arguments</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Customizing Schema</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/customizing-schemas/generator-config">Generator Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/customizing-schemas/documenting-fields">Documenting Schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/customizing-schemas/excluding-fields">Excluding Fields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/customizing-schemas/renaming-fields">Renaming Fields</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/customizing-schemas/directives">Directives</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/customizing-schemas/deprecating-schema">Deprecating Schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/customizing-schemas/advanced-features">Advanced Features</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Execution</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/execution/fetching-data">Fetching Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/execution/async-models">Async Models</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/execution/exceptions">Exceptions and Partial Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/execution/data-fetching-environment">Data Fetching Environment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/execution/contextual-data">Contextual Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/execution/optional-undefined-arguments">Optional Undefined Arguments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/execution/subscriptions">Subscriptions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/execution/introspection">Introspection</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Federation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/federation/apollo-federation">Apollo Federation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/federation/federated-schemas">Federated Schemas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/federation/federated-directives">Federated Directives</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/schema-generator/federation/type-resolution">Federated Type Resolution</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Server</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/graphql-server">GraphQLServer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/graphql-request-parser">GraphQLRequestParser</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/graphql-context-factory">GraphQLContextFactory</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/graphql-request-handler">GraphQLRequestHandler</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/data-loaders">Data Loaders</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/server-subscriptions">Subscriptions</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Spring Server</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/spring-server/spring-overview">Spring Server Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/spring-server/spring-beans">Automatically Created Beans</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/spring-server/spring-properties">Configuration Properties</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/spring-server/spring-schema">Writing Schemas with Spring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/spring-server/spring-graphql-context">Generating GraphQL Context</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/server/spring-server/spring-subscriptions">Subscriptions</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Client</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-kotlin/docs/next/client/client-overview">Client Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/graphql-kotlin/docs/next/client/client-features">Client Features</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/graphql-kotlin/docs/next/client/client-customization">Client Customization</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Build Plugins</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Gradle Plugin</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/plugins/gradle-plugin-tasks">Tasks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/plugins/gradle-plugin-usage">Usage</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Maven Plugin</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/plugins/maven-plugin-goals">Goals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/plugins/maven-plugin-usage">Usage</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/graphql-kotlin/docs/next/plugins/hooks-provider">Schema Generator Hooks Provider</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This documentation is for an unreleased version.</div><div class="margin-top--md">For the latest documentation, see the <strong><a href="/graphql-kotlin/docs/client/client-customization">latest version</a></strong> (4.x.x).</div></div><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: Next</span></div><header><h1 class="docTitle_Oumm">Client Customization</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="ktor-http-client-customization"></a>Ktor HTTP Client Customization<a class="hash-link" href="#ktor-http-client-customization" title="Direct link to heading">#</a></h2><p><code>GraphQLKtorClient</code> is a thin wrapper on top of <a href="https://ktor.io/clients/index.html" target="_blank" rel="noopener noreferrer">Ktor HTTP Client</a> and supports fully
asynchronous non-blocking communication. It is highly customizable and can be configured with any supported Ktor HTTP
<a href="https://ktor.io/clients/http-client/engines.html" target="_blank" rel="noopener noreferrer">engine</a> and <a href="https://ktor.io/clients/http-client/features.html" target="_blank" rel="noopener noreferrer">features</a>.</p><p><code>GraphQLKtorClient</code> uses the Ktor HTTP Client to execute the underlying queries. Clients can be customized with different
engines (defaults to Coroutine-based IO) and HTTP client features. Custom configurations can be applied through Ktor DSL
style builders.</p><p>See <a href="https://ktor.io/clients/index.html" target="_blank" rel="noopener noreferrer">Ktor HTTP Client documentation</a> for additional details.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="global-client-customization"></a>Global Client Customization<a class="hash-link" href="#global-client-customization" title="Direct link to heading">#</a></h3><p>A single instance of <code>GraphQLKtorClient</code> can be used to handle many GraphQL operations. You can specify a target engine factory and
configure it through the corresponding <a href="https://api.ktor.io/1.3.2/io.ktor.client/-http-client-config/index.html" target="_blank" rel="noopener noreferrer">HttpClientConfig</a>.
Ktor also provides a number of <a href="https://ktor.io/clients/http-client/features.html" target="_blank" rel="noopener noreferrer">standard HTTP features</a> and
allows you to easily create custom ones that can be configured globally.</p><p>The below example configures a new <code>GraphQLKtorClient</code> to use the <code>OkHttp</code> engine with custom timeouts, adds a default <code>X-MY-API-KEY</code>
header to all requests, and enables basic logging of the requests.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-kotlin codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val client = GraphQLKtorClient(</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        url = URL(&quot;http://localhost:8080/graphql&quot;),</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        engineFactory = OkHttp</span></div><div class="token-line" style="color:#393A34"><span class="token plain">) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    engine {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        config {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            connectTimeout(10, TimeUnit.SECONDS)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            readTimeout(60, TimeUnit.SECONDS)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            writeTimeout(60, TimeUnit.SECONDS)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    defaultRequest {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        header(&quot;X-MY-API-KEY&quot;, &quot;someSecretApiKey&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    install(Logging) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        logger = Logger.DEFAULT</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        level = LogLevel.INFO</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="per-request-customization"></a>Per Request Customization<a class="hash-link" href="#per-request-customization" title="Direct link to heading">#</a></h3><p>Individual GraphQL requests can be customized through <a href="https://api.ktor.io/1.3.2/io.ktor.client.request/-http-request-builder/" target="_blank" rel="noopener noreferrer">HttpRequestBuilder</a>.
You can use this mechanism to specify custom headers, update target url to include custom query parameters, configure
attributes that can be accessed from the pipeline features as well specify timeouts per request.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-kotlin codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val helloWorldQuery = HelloWorldQuery(variables = HelloWorldQuery.Variables(name = &quot;John Doe&quot;))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val result = client.execute(helloWorldQuery) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    header(&quot;X-B3-TraceId&quot;, &quot;0123456789abcdef&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="spring-webclient-customization"></a>Spring WebClient Customization<a class="hash-link" href="#spring-webclient-customization" title="Direct link to heading">#</a></h2><p><code>GraphQLWebClient</code> is a thin wrapper on top of <a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/reactive/function/client/WebClient.html" target="_blank" rel="noopener noreferrer">Spring WebClient</a>
that relies on Reactor Netty for fully asynchronous non-blocking communications. If you want to use Jetty instead you will
need to exclude provided <code>io.projectreactor.netty:reactor-netty</code> dependency and instead add <code>org.eclipse.jetty:jetty-reactive-httpclient</code>
dependency.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="global-client-customization-1"></a>Global Client Customization<a class="hash-link" href="#global-client-customization-1" title="Direct link to heading">#</a></h3><p>A single instance of <code>GraphQLWebClient</code> can be used to handle many GraphQL operations and you can customize it by providing
a custom instance of <code>WebClient.Builder</code>. See <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-webclient-customization" target="_blank" rel="noopener noreferrer">Spring documentation</a>
for additional details.</p><p>Example below configures <code>GraphQLWebClient</code> with custom timeouts and adds a default <code>X-MY-API-KEY</code> header to all requests.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-kotlin codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val httpClient: HttpClient = HttpClient.create()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 10_000)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    .responseTimeout(Duration.ofMillis(10_000))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val connector: ClientHttpConnector = ReactorClientHttpConnector(httpClient.wiretap(true))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val webClientBuilder = WebClient.builder()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    .clientConnector(connector)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    .defaultHeader(&quot;X-MY-API-KEY&quot;, &quot;someSecretApiKey&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val client = GraphQLWebClient(</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    url = &quot;http://localhost:8080/graphql&quot;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    builder = webClientBuilder</span></div><div class="token-line" style="color:#393A34"><span class="token plain">)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="per-request-customization-1"></a>Per Request Customization<a class="hash-link" href="#per-request-customization-1" title="Direct link to heading">#</a></h3><p>Individual GraphQL requests can be customized by providing <code>WebClient.RequestBodyUriSpec</code> lambda. You can use this mechanism
to specify custom headers or include custom attributes or query parameters.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-kotlin codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val helloWorldQuery = HelloWorldQuery(variables = HelloWorldQuery.Variables(name = &quot;John Doe&quot;))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val result = client.execute(helloWorldQuery) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    header(&quot;X-B3-TraceId&quot;, &quot;0123456789abcdef&quot;)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="custom-graphql-client"></a>Custom GraphQL Client<a class="hash-link" href="#custom-graphql-client" title="Direct link to heading">#</a></h2><p>GraphQL Kotlin libraries provide generic a <code>GraphQLClient</code> interface as well as Ktor HTTP Client and Spring WebClient based
reference implementations. Both <code>GraphQLKtorClient</code> and <code>GraphQLWebClient</code> are open classes which means you can also
extend them to provide some custom <code>execute</code> logic.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-kotlin codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">class CustomGraphQLClient(url: URL) : GraphQLKtorClient&lt;CIOEngineConfig&gt;(url = url, engineFactory = CIO) {</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    override suspend fun &lt;T&gt; execute(request: GraphQLClientRequest, requestCustomizer: HttpRequestBuilder.() -&gt; Unit): GraphQLResponse&lt;T&gt; {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        // custom init logic</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        val result = super.execute(request, requestCustomizer)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        // custom finalize logic</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        return result</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="jackson-customization"></a>Jackson Customization<a class="hash-link" href="#jackson-customization" title="Direct link to heading">#</a></h2><p><code>GraphQLClient</code> relies on Jackson to handle polymorphic types and default enum values. You can specify your own custom
object mapper configured with some additional serialization/deserialization features but due to the necessary logic to
handle the above, currently we don&#x27;t support other JSON libraries.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-kotlin codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val customObjectMapper = jacksonObjectMapper()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val client = GraphQLClient(url = URL(&quot;http://localhost:8080/graphql&quot;), mapper = customObjectMapper)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="deprecated-field-usage"></a>Deprecated Field Usage<a class="hash-link" href="#deprecated-field-usage" title="Direct link to heading">#</a></h2><p>Build plugins will automatically fail generation of a client if any of the specified query files are referencing
deprecated fields. This ensures that your clients have to explicitly opt-in into deprecated usage by specifying
<code>allowDeprecatedFields</code> configuration option.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="custom-graphql-scalars"></a>Custom GraphQL Scalars<a class="hash-link" href="#custom-graphql-scalars" title="Direct link to heading">#</a></h2><p>By default, custom GraphQL scalars are serialized and <a href="https://kotlinlang.org/docs/reference/type-aliases.html" target="_blank" rel="noopener noreferrer">type-aliased</a>
to a String. GraphQL Kotlin plugins also support custom serialization based on provided configuration.</p><p>In order to automatically convert between custom GraphQL <code>UUID</code> scalar type and <code>java.util.UUID</code>, we first need to create
our custom <code>ScalarConverter</code>.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-kotlin codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">package com.example.client</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">import com.expediagroup.graphql.client.converter.ScalarConverter</span></div><div class="token-line" style="color:#393A34"><span class="token plain">import java.util.UUID</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">class UUIDScalarConverter : ScalarConverter&lt;UUID&gt; {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    override fun toScalar(rawValue: Any): UUID = UUID.fromString(rawValue.toString())</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    override fun toJson(value: UUID): Any = value.toString()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>And then configure build plugin by specifying</p><ul><li>Custom GraphQL scalar name</li><li>Target class name</li><li>Converter that provides logic to map between GraphQL and Kotlin type</li></ul><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-kotlin codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">graphql {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    packageName = &quot;com.example.generated&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    endpoint = &quot;http://localhost:8080/graphql&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    customScalars = listOf(GraphQLScalar(&quot;UUID&quot;, &quot;java.util.UUID&quot;, &quot;com.example.UUIDScalarConverter&quot;))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>See <a href="/graphql-kotlin/docs/next/plugins/gradle-plugin-tasks">Gradle</a> and <a href="/graphql-kotlin/docs/next/plugins/maven-plugin-goals">Maven</a> plugin documentation for additional details.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ExpediaGroup/graphql-kotlin/tree/master/website/docs/client/client-customization.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-02-20T20:00:27.000Z" class="docLastUpdatedAt_1Qna">2/20/2021</time> by <strong>Shane Myrick</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/graphql-kotlin/docs/next/client/client-features"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Client Features</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/graphql-kotlin/docs/next/plugins/gradle-plugin-tasks"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Gradle Plugin Tasks Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ktor-http-client-customization" class="table-of-contents__link">Ktor HTTP Client Customization</a><ul><li><a href="#global-client-customization" class="table-of-contents__link">Global Client Customization</a></li><li><a href="#per-request-customization" class="table-of-contents__link">Per Request Customization</a></li></ul></li><li><a href="#spring-webclient-customization" class="table-of-contents__link">Spring WebClient Customization</a><ul><li><a href="#global-client-customization-1" class="table-of-contents__link">Global Client Customization</a></li><li><a href="#per-request-customization-1" class="table-of-contents__link">Per Request Customization</a></li></ul></li><li><a href="#custom-graphql-client" class="table-of-contents__link">Custom GraphQL Client</a></li><li><a href="#jackson-customization" class="table-of-contents__link">Jackson Customization</a></li><li><a href="#deprecated-field-usage" class="table-of-contents__link">Deprecated Field Usage</a></li><li><a href="#custom-graphql-scalars" class="table-of-contents__link">Custom GraphQL Scalars</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img class="footer__logo" src="/graphql-kotlin/img/Expedia-Group-Logo_E-Stacked.png"></div><div class="footer__copyright">Copyright Â© 2021 Expedia, Inc.</div></div></div></footer></div>
<script src="/graphql-kotlin/styles.0be40b40.js"></script>
<script src="/graphql-kotlin/runtime~main.3452ef2b.js"></script>
<script src="/graphql-kotlin/main.9b929bdd.js"></script>
<script src="/graphql-kotlin/1.86a8a4de.js"></script>
<script src="/graphql-kotlin/2.a4a621d7.js"></script>
<script src="/graphql-kotlin/165.e2a0eb40.js"></script>
<script src="/graphql-kotlin/168.251d61f6.js"></script>
<script src="/graphql-kotlin/935f2afb.96f675be.js"></script>
<script src="/graphql-kotlin/17896441.3c4bb8bf.js"></script>
<script src="/graphql-kotlin/30544b63.ae863128.js"></script>
</body>
</html>